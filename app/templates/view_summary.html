{% extends 'base.html' %}

{% block title %}{{ summary.title }} - Study Planner{% endblock %}

{% block head_extra %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/summarizer.css') }}">
{% endblock %}

{% block page_title %}{{ title }}{% endblock %}

{% block content %}
    <div class="view-summary-container">
        <div class="view-summary-header">
            <a href="{{ url_for('main.summarizer') }}" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i> Back to Summaries
            </a>
            <div class="header-actions">
                <form action="{{ url_for('main.delete_summary', summary_id=summary.id) }}" method="POST" style="display:inline;">
                    <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this summary?');">
                        <i class="fas fa-trash"></i> Delete
                    </button>
                </form>
            </div>
        </div>
        
        <div class="summary-detail-card">
            <div class="summary-detail-header">
                <div class="file-type-badge {{ summary.file_type }} large">
                    {% if summary.file_type == 'word' %}
                        <i class="fas fa-file-word"></i>
                    {% elif summary.file_type == 'pdf' %}
                        <i class="fas fa-file-pdf"></i>
                    {% elif summary.file_type == 'ocr' %}
                        <i class="fas fa-image"></i>
                    {% endif %}
                </div>
                <div class="summary-detail-info">
                    <h1>{{ summary.title }}</h1>
                    <div class="summary-meta-info">
                        <span><i class="fas fa-file"></i> {{ summary.original_filename }}</span>
                        <span><i class="fas fa-calendar"></i> {{ summary.date_created.strftime('%B %d, %Y at %I:%M %p') }}</span>
                    </div>
                </div>
            </div>
            
            <div class="summary-content-tabs">
                <button class="tab-btn active" data-tab="summary">
                    <i class="fas fa-list-ul"></i> Summary
                </button>
                <button class="tab-btn" data-tab="original">
                    <i class="fas fa-file-alt"></i> Original Text
                </button>
            </div>
            
            <div class="tab-content">
                <div class="tab-panel active" id="summary-panel">
                    <div class="summary-text-box">
                        <h3><i class="fas fa-star"></i> Key Points</h3>
                        <div class="summary-bullets">{{ summary.summary_text }}</div>
                    </div>
                </div>
                
                <div class="tab-panel" id="original-panel">
                    <div class="original-text-box">
                        <h3><i class="fas fa-file-alt"></i> Extracted Text</h3>
                        <div class="original-text">{{ summary.extracted_text }}</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block body_extra %}
<script>
    // Tab switching functionality
    const tabBtns = document.querySelectorAll('.tab-btn');
    const tabPanels = document.querySelectorAll('.tab-panel');
    
    tabBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            const tabName = this.dataset.tab;
            
            // Remove active class from all buttons and panels
            tabBtns.forEach(b => b.classList.remove('active'));
            tabPanels.forEach(p => p.classList.remove('active'));
            
            // Add active class to clicked button and corresponding panel
            this.classList.add('active');
            document.getElementById(tabName + '-panel').classList.add('active');
        });
    });
</script>
{% endblock %}
